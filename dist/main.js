!function(){"use strict";var e=document.querySelector(".profile__button-edit"),t=document.querySelector(".popup__close-edit"),r=document.querySelector(".profile__info"),n=r.querySelector("#profile__name"),o=r.querySelector("#profile__aboutme"),i=n.textContent,a=o.textContent,s=document.querySelector(".popup__edit"),u=document.querySelector(".form__edit"),c=u.querySelector("#nameUser"),l=u.querySelector("#aboutMe"),p=document.querySelector(".popup__add"),m=document.querySelector(".cards"),d=document.querySelector(".profile__button-add"),_=document.querySelector(".template__card"),f=document.querySelector(".form__add"),h=f.querySelector("#title"),v=f.querySelector("#imageUrl"),y=f.querySelector("#boton__create"),S=document.querySelector(".popup__close-add"),b=document.querySelector(".popup__images"),g=(b.querySelector(".popup__imagen"),b.querySelector(".popup__name"),document.querySelector(".popup__close-images"));function E(e){27!==e.keyCode&&e.target!==s&&e.target!==p&&e.target!==b||(s.classList.remove("popup__opened"),p.classList.remove("popup__opened"),b.classList.remove("popup__opened"))}function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}document.body.addEventListener("keydown",E),s.addEventListener("click",E),p.addEventListener("click",E),b.addEventListener("click",E),d.addEventListener("click",(function(e){p.classList.add("popup__opened")})),f.addEventListener("submit",(function(e){e.preventDefault();var t=new w(h.value,v.value,_);m.prepend(t.generateCard()),p.classList.remove("popup__opened"),f.reset(),y.classList.add("button_inactive")})),S.addEventListener("click",(function(e){p.classList.remove("popup__opened")})),e.addEventListener("click",(function(e){s.classList.add("popup__opened"),c.value=i,l.value=a})),u.addEventListener("submit",(function(e){e.preventDefault(),n.textContent=c.value,o.textContent=l.value,s.classList.remove("popup__opened")})),t.addEventListener("click",(function(e){s.classList.remove("popup__opened")}));var w=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.link=r,this.templateCard=n},(t=[{key:"_getTemplate",value:function(){this.card=_.cloneNode(!0).content.querySelector(".card")}},{key:"_setProperties",value:function(){this.cardImg=this.card.querySelector(".card__img"),this.cardName=this.card.querySelector(".card__name"),this.cardLike=this.card.querySelector(".card__like"),this.buttonTrash=this.card.querySelector(".card__trash"),this.cardImg.src=this.link,this.cardImg.alt=this.name,this.cardName.textContent=this.name}},{key:"_handleDelete",value:function(){this.card.remove()}},{key:"_handleLike",value:function(){this.cardLike.classList.toggle("card__like-active")}},{key:"_handleOpenImagesPopup",value:function(){this.popupImages=document.querySelector(".popup__images"),this.popupImages.classList.add("popup__opened"),this.popupImagen=this.popupImages.querySelector(".popup__imagen"),this.popupName=this.popupImages.querySelector(".popup__name"),this.popupImagen.src=this.link,this.popupImagen.alt=this.name,this.popupName.textContent=this.name}},{key:"_handleCloseImagesPopup",value:function(){b.classList.remove("popup__opened")}},{key:"_setEventListeners",value:function(){var e=this;this.buttonTrash.addEventListener("click",(function(){e._handleDelete()})),this.cardLike.addEventListener("click",(function(){e._handleLike()})),this.cardImg.addEventListener("click",(function(){e._handleOpenImagesPopup()})),g.addEventListener("click",(function(){e._handleCloseImagesPopup()})),this.regex=/\.(jpeg|jpg|png|gif|svg)$/i,""!==this.cardImg.src&&this.regex.test(this.cardImg.src)||(this.card.style.backgroundColor="#000")}},{key:"generateCard",value:function(){return this._getTemplate(),this._setProperties(),this._setEventListeners(),this.card}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function B(e,t,r){return t&&I(e.prototype,t),r&&I(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t,r){return(t=P(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}[{name:"Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"},{name:"Colors",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Birhat",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"MontaÃ±as Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Parque Nacional",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}].forEach((function(e){var t=new w(e.name,e.link,e.templateCard);m.append(t.generateCard())}));var x=B((function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"_showInputError",(function(e,t){n.errorElement=n.formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(n.inputErrorClass),n.errorElement.textContent=t,n.errorElement.classList.add(n.errorClass)})),j(this,"_hideInputError",(function(e){n.errorElement=n.formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(n.inputErrorClass),n.errorElement.classList.remove(n.errorClass),n.errorElement.textContent=""})),j(this,"_checkInputValidity",(function(e){e.validity.valid&&""!=e?n._hideInputError(e):n._showInputError(e,e.validationMessage)})),j(this,"_hasInvalidInput",(function(){return n.inputList.some((function(e){return!e.validity.valid}))})),j(this,"_toggleButtonState",(function(){n._hasInvalidInput(n.inputList)?n.buttonElement.classList.add(n.inactiveButtonClass):n.buttonElement.classList.remove(n.inactiveButtonClass)})),j(this,"_setEventListeners",(function(){n.inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n._toggleButtonState()}))})),n._toggleButtonState()})),j(this,"enableValidation",(function(){n.formList=Array.from(document.querySelectorAll(n.formSelector)),n.formList.forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),n._setEventListeners()}))})),this.formElement=t,this.formSelector=r.formSelector,this.inputSelector=r.inputSelector,this.submitButtonSelector=r.submitButtonSelector,this.inactiveButtonClass=r.inactiveButtonClass,this.inputErrorClass=r.inputErrorClass,this.errorClass=r.errorClass,this.buttonElement=this.formElement.querySelector(r.submitButtonSelector),this.inputList=Array.from(this.formElement.querySelectorAll(this.inputSelector))}));new x(f,{formSelector:".form__add",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error"}).enableValidation(),new x(u,{formSelector:".form__edit",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input_error"}).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBR0EsSUFBTUEsRUFBb0JDLFNBQVNDLGNBQWMseUJBQzNDQyxFQUFpQkYsU0FBU0MsY0FBYyxzQkFDeENFLEVBQWNILFNBQVNDLGNBQWMsa0JBQ3JDRyxFQUFlRCxFQUFZRixjQUFjLGtCQUN6Q0ksRUFBaUJGLEVBQVlGLGNBQWMscUJBQzNDSyxFQUFjRixFQUFhRyxZQUMzQkMsRUFBaUJILEVBQWVFLFlBR2hDRSxFQUFZVCxTQUFTQyxjQUFjLGdCQUM1QlMsRUFBV1YsU0FBU0MsY0FBYyxlQUNsQ1UsRUFBV0QsRUFBU1QsY0FBYyxhQUNsQ1csRUFBVUYsRUFBU1QsY0FBYyxZQUd4Q1ksRUFBV2IsU0FBU0MsY0FBYyxlQUMzQmEsRUFBUWQsU0FBU0MsY0FBYyxVQUV0Q2MsRUFBbUJmLFNBQVNDLGNBQWMsd0JBQ25DZSxFQUFlaEIsU0FBU0MsY0FBYyxtQkFDdENnQixFQUFjakIsU0FBU0MsY0FBYyxjQUNyQ2lCLEVBQVFELEVBQVloQixjQUFjLFVBQ2xDa0IsRUFBV0YsRUFBWWhCLGNBQWMsYUFDNUNtQixFQUFlSCxFQUFZaEIsY0FBYyxrQkFHekNvQixFQUFnQnJCLFNBQVNDLGNBQWMscUJBRWhDcUIsRUFBY3RCLFNBQVNDLGNBQWMsa0JBSXJDc0IsR0FIY0QsRUFBWXJCLGNBQWMsa0JBQzVCcUIsRUFBWXJCLGNBQWMsZ0JBRW5CRCxTQUFTQyxjQUFjLHlCQXNCaEQsU0FBU3VCLEVBQVdDLEdBRVQsS0FBZEEsRUFBRUMsU0FDRkQsRUFBRUUsU0FBV2xCLEdBQ2JnQixFQUFFRSxTQUFXZCxHQUNiWSxFQUFFRSxTQUFXTCxJQUViYixFQUFVbUIsVUFBVUMsT0FBTyxpQkFDM0JoQixFQUFTZSxVQUFVQyxPQUFPLGlCQUMxQlAsRUFBWU0sVUFBVUMsT0FBTyxpQkFFakMsQyxvcUJBdUJBN0IsU0FBUzhCLEtBQUtDLGlCQUFpQixVQUFXUCxHQUMxQ2YsRUFBVXNCLGlCQUFpQixRQUFTUCxHQUNwQ1gsRUFBU2tCLGlCQUFpQixRQUFTUCxHQUNuQ0YsRUFBWVMsaUJBQWlCLFFBQVNQLEdBRXRDVCxFQUFpQmdCLGlCQUFpQixTQXpCM0IsU0FBd0JOLEdBQzdCWixFQUFTZSxVQUFVSSxJQUFJLGdCQUN6QixJQXdCQWYsRUFBWWMsaUJBQWlCLFVBaEJ0QixTQUFrQk4sR0FDdkJBLEVBQUVRLGlCQUNGLElBQU1DLEVBQVUsSUFBSUMsRUFBS2pCLEVBQU1rQixNQUFPakIsRUFBU2lCLE1BQU9wQixHQUV0REYsRUFBTXVCLFFBQVFILEVBQVFJLGdCQUN0QnpCLEVBQVNlLFVBQVVDLE9BQU8saUJBQzFCWixFQUFZc0IsUUFDWm5CLEVBQWFRLFVBQVVJLElBQUksa0JBQzdCLElBU0FYLEVBQWNVLGlCQUFpQixTQXRCeEIsU0FBc0JOLEdBQzNCWixFQUFTZSxVQUFVQyxPQUFPLGdCQUM1QixJQXNCQTlCLEVBQWtCZ0MsaUJBQWlCLFNBOUQ1QixTQUF5Qk4sR0FDOUJoQixFQUFVbUIsVUFBVUksSUFBSSxpQkFDeEJyQixFQUFTeUIsTUFBUTlCLEVBQ2pCTSxFQUFRd0IsTUFBUTVCLENBQ2xCLElBMkRBRSxFQUFTcUIsaUJBQWlCLFVBekRuQixTQUF5Qk4sR0FFOUJBLEVBQUVRLGlCQUNGN0IsRUFBYUcsWUFBY0ksRUFBU3lCLE1BQ3BDL0IsRUFBZUUsWUFBY0ssRUFBUXdCLE1BQ3JDM0IsRUFBVW1CLFVBQVVDLE9BQU8sZ0JBQzdCLElBb0RBM0IsRUFBZTZCLGlCQUFpQixTQWxEekIsU0FBMEJOLEdBQy9CaEIsRUFBVW1CLFVBQVVDLE9BQU8sZ0JBQzdCLElDakRTLElBMkJNTSxFQUFJLFdBS2QsTyxFQUpELFNBQUFBLEVBQVlLLEVBQU1DLEVBQU16QixJLDRGQUFjMEIsQ0FBQSxLQUFBUCxHQUNwQ1EsS0FBS0gsS0FBT0EsRUFDWkcsS0FBS0YsS0FBT0EsRUFDWkUsS0FBSzNCLGFBQWVBLENBQ3RCLEcsRUFBQyxFQUFBNEIsSUFBQSxlQUFBUixNQUVELFdBQ0VPLEtBQUtFLEtBQU83QixFQUFhOEIsV0FBVSxHQUFNQyxRQUFROUMsY0FBYyxRQUNqRSxHQUFDLENBQUEyQyxJQUFBLGlCQUFBUixNQUVELFdBQ0VPLEtBQUtLLFFBQVVMLEtBQUtFLEtBQUs1QyxjQUFjLGNBQ3ZDMEMsS0FBS00sU0FBV04sS0FBS0UsS0FBSzVDLGNBQWMsZUFDeEMwQyxLQUFLTyxTQUFXUCxLQUFLRSxLQUFLNUMsY0FBYyxlQUN4QzBDLEtBQUtRLFlBQWNSLEtBQUtFLEtBQUs1QyxjQUFjLGdCQUUzQzBDLEtBQUtLLFFBQVFJLElBQU1ULEtBQUtGLEtBQ3hCRSxLQUFLSyxRQUFRSyxJQUFNVixLQUFLSCxLQUN4QkcsS0FBS00sU0FBUzFDLFlBQWNvQyxLQUFLSCxJQUNuQyxHQUVBLENBQUFJLElBQUEsZ0JBQUFSLE1BQ0EsV0FDRU8sS0FBS0UsS0FBS2hCLFFBQ1osR0FBQyxDQUFBZSxJQUFBLGNBQUFSLE1BRUQsV0FDRU8sS0FBS08sU0FBU3RCLFVBQVUwQixPQUFPLG9CQUNqQyxHQUVBLENBQUFWLElBQUEseUJBQUFSLE1BQ0EsV0FDRU8sS0FBS3JCLFlBQWN0QixTQUFTQyxjQUFjLGtCQUMxQzBDLEtBQUtyQixZQUFZTSxVQUFVSSxJQUFJLGlCQUMvQlcsS0FBS1ksWUFBY1osS0FBS3JCLFlBQVlyQixjQUFjLGtCQUNsRDBDLEtBQUthLFVBQVliLEtBQUtyQixZQUFZckIsY0FBYyxnQkFDaEQwQyxLQUFLWSxZQUFZSCxJQUFNVCxLQUFLRixLQUM1QkUsS0FBS1ksWUFBWUYsSUFBTVYsS0FBS0gsS0FDNUJHLEtBQUthLFVBQVVqRCxZQUFjb0MsS0FBS0gsSUFDcEMsR0FFQSxDQUFBSSxJQUFBLDBCQUFBUixNQUNBLFdBQ0VkLEVBQVlNLFVBQVVDLE9BQU8sZ0JBQy9CLEdBRUEsQ0FBQWUsSUFBQSxxQkFBQVIsTUFDQSxXQUFxQixJQUFBcUIsRUFBQSxLQUNuQmQsS0FBS1EsWUFBWXBCLGlCQUFpQixTQUFTLFdBQ3pDMEIsRUFBS0MsZUFDUCxJQUNBZixLQUFLTyxTQUFTbkIsaUJBQWlCLFNBQVMsV0FDdEMwQixFQUFLRSxhQUNQLElBQ0FoQixLQUFLSyxRQUFRakIsaUJBQWlCLFNBQVMsV0FDckMwQixFQUFLRyx3QkFDUCxJQUNBckMsRUFBaUJRLGlCQUFpQixTQUFTLFdBQ3pDMEIsRUFBS0kseUJBQ1AsSUFFQWxCLEtBQUttQixNQUFRLDZCQUNZLEtBQXJCbkIsS0FBS0ssUUFBUUksS0FBZVQsS0FBS21CLE1BQU1DLEtBQUtwQixLQUFLSyxRQUFRSSxPQUMzRFQsS0FBS0UsS0FBS21CLE1BQU1DLGdCQUFrQixPQUV0QyxHQUFDLENBQUFyQixJQUFBLGVBQUFSLE1BQ0QsV0FLRSxPQUpBTyxLQUFLdUIsZUFDTHZCLEtBQUt3QixpQkFDTHhCLEtBQUt5QixxQkFFRXpCLEtBQUtFLElBQ2QsTSw2RUFBQyxDQXpFYyxHLDY0QkEzQlcsQ0FDMUIsQ0FDRUwsS0FBTSxZQUNOQyxLQUFNLDZGQUVSLENBQ0VELEtBQU0sU0FDTkMsS0FBTSxnR0FFUixDQUNFRCxLQUFNLFNBQ05DLEtBQU0sdUdBRVIsQ0FDRUQsS0FBTSxrQkFDTkMsS0FBTSx1R0FFUixDQUNFRCxLQUFNLGtCQUNOQyxLQUFNLGdHQUVSLENBQ0VELEtBQU0saUJBQ05DLEtBQU0sOEZBaUZHNEIsU0FBUSxTQUFVQyxHQUM3QixJQUFNekIsRUFBTyxJQUFJVixFQUFLbUMsRUFBSzlCLEtBQU04QixFQUFLN0IsS0FBTTZCLEVBQUt0RCxjQUNqREYsRUFBTXlELE9BQU8xQixFQUFLUCxlQUNwQixJQ2hISyxJQUFNa0MsRUFBYUMsR0FDdEIsU0FBQUQsRUFBWXZELEVBQWF5RCxHQUFTLElBQUFqQixFQUFBLE0sNEZBQUFmLENBQUEsS0FBQThCLEdBQUFHLEVBQUEsd0JBZ0JoQixTQUFDQyxFQUFjQyxHQUMvQnBCLEVBQUtxQixhQUFlckIsRUFBS3hDLFlBQVloQixjQUFjLElBQUQ4RSxPQUM1Q0gsRUFBYUksR0FBRSxXQUVyQkosRUFBYWhELFVBQVVJLElBQUl5QixFQUFLd0IsaUJBQ2hDeEIsRUFBS3FCLGFBQWF2RSxZQUFjc0UsRUFDaENwQixFQUFLcUIsYUFBYWxELFVBQVVJLElBQUl5QixFQUFLeUIsV0FFdkMsSUFBQ1AsRUFBQSx3QkFFaUIsU0FBQ0MsR0FDakJuQixFQUFLcUIsYUFBZXJCLEVBQUt4QyxZQUFZaEIsY0FBYyxJQUFEOEUsT0FDNUNILEVBQWFJLEdBQUUsV0FFckJKLEVBQWFoRCxVQUFVQyxPQUFPNEIsRUFBS3dCLGlCQUNuQ3hCLEVBQUtxQixhQUFhbEQsVUFBVUMsT0FBTzRCLEVBQUt5QixZQUN4Q3pCLEVBQUtxQixhQUFhdkUsWUFBYyxFQUNsQyxJQUFDb0UsRUFBQSw0QkFFcUIsU0FBQ0MsR0FDaEJBLEVBQWFPLFNBQVNDLE9BQXlCLElBQWhCUixFQUdsQ25CLEVBQUs0QixnQkFBZ0JULEdBRnJCbkIsRUFBSzZCLGdCQUFnQlYsRUFBY0EsRUFBYVcsa0JBSXBELElBQUNaLEVBQUEseUJBRWtCLFdBQ2pCLE9BQU9sQixFQUFLK0IsVUFBVUMsTUFBSyxTQUFDYixHQUMxQixPQUFRQSxFQUFhTyxTQUFTQyxLQUNoQyxHQUNGLElBQUNULEVBQUEsMkJBRW9CLFdBQ2ZsQixFQUFLaUMsaUJBQWlCakMsRUFBSytCLFdBQzdCL0IsRUFBS2tDLGNBQWMvRCxVQUFVSSxJQUFJeUIsRUFBS21DLHFCQUV0Q25DLEVBQUtrQyxjQUFjL0QsVUFBVUMsT0FBTzRCLEVBQUttQyxvQkFFN0MsSUFBQ2pCLEVBQUEsMkJBRW9CLFdBQ25CbEIsRUFBSytCLFVBQVVuQixTQUFRLFNBQUNPLEdBQ3RCQSxFQUFhN0MsaUJBQWlCLFNBQVMsV0FDckMwQixFQUFLb0Msb0JBQW9CakIsR0FDekJuQixFQUFLcUMsb0JBQ1AsR0FDRixJQUNBckMsRUFBS3FDLG9CQUNQLElBQUNuQixFQUFBLHlCQUVrQixXQUNqQmxCLEVBQUtzQyxTQUFXQyxNQUFNQyxLQUFLakcsU0FBU2tHLGlCQUFpQnpDLEVBQUswQyxlQUMxRDFDLEVBQUtzQyxTQUFTMUIsU0FBUSxTQUFDcEQsR0FDckJBLEVBQVljLGlCQUFpQixVQUFVLFNBQUNOLEdBQ3RDQSxFQUFFUSxnQkFDSixJQUNBd0IsRUFBS1csb0JBQ1AsR0FDRixJQTFFRXpCLEtBQUsxQixZQUFjQSxFQUNuQjBCLEtBQUt3RCxhQUFlekIsRUFBUXlCLGFBQzVCeEQsS0FBS3lELGNBQWdCMUIsRUFBUTBCLGNBQzdCekQsS0FBSzBELHFCQUF1QjNCLEVBQVEyQixxQkFDcEMxRCxLQUFLaUQsb0JBQXNCbEIsRUFBUWtCLG9CQUNuQ2pELEtBQUtzQyxnQkFBa0JQLEVBQVFPLGdCQUMvQnRDLEtBQUt1QyxXQUFhUixFQUFRUSxXQUMxQnZDLEtBQUtnRCxjQUFnQmhELEtBQUsxQixZQUFZaEIsY0FDcEN5RSxFQUFRMkIsc0JBRVYxRCxLQUFLNkMsVUFBWVEsTUFBTUMsS0FDckJ0RCxLQUFLMUIsWUFBWWlGLGlCQUFpQnZELEtBQUt5RCxlQUUzQyxJQ2dCYSxJQUFJNUIsRUFBY3ZELEVBVG5CLENBQ2RrRixhQUFjLGFBQ2RDLGNBQWUsZUFDZkMscUJBQXNCLGdCQUN0QlQsb0JBQXFCLGtCQUNyQlgsZ0JBQWlCLHlCQUNqQkMsV0FBWSxzQkFJTG9CLG1CQUNXLElBQUk5QixFQUFjOUQsRUFwQnJCLENBQ2Z5RixhQUFjLGNBQ2RDLGNBQWUsZUFDZkMscUJBQXNCLGdCQUN0QlQsb0JBQXFCLGtCQUNyQlgsZ0JBQWlCLHlCQUNqQkMsV0FBWSxzQkFlRm9CLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vanMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9qcy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL2pzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcblxyXG4vLyBCIE8gVCBPIE4gICBBIEcgUiBFIEcgQSBSXHJcbmNvbnN0IHByb2ZpbGVCdXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcclxuY29uc3QgcG9wdXBDbG9zZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1lZGl0XCIpO1xyXG5jb25zdCBwcm9maWxlSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mb1wiKTtcclxuY29uc3QgcHJvZmlsZU5hbWVzID0gcHJvZmlsZUluZm8ucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlQWJvdXRVcyA9IHByb2ZpbGVJbmZvLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fYWJvdXRtZVwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBwcm9maWxlTmFtZXMudGV4dENvbnRlbnQ7XHJcbmNvbnN0IHByb2ZpbGVBYm91dE1lID0gcHJvZmlsZUFib3V0VXMudGV4dENvbnRlbnQ7XHJcblxyXG4vLyBNIE8gRCBBIEwgICBQIEEgUiBBICAgRSBEIEkgVCBBIFIgRiBPIFIgTSBVIEwgQSBSIEkgT1xyXG5jb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgZm9ybUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2VkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBuYW1lVXNlciA9IGZvcm1FZGl0LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVVzZXJcIik7XHJcbmV4cG9ydCBjb25zdCBhYm91dE1lID0gZm9ybUVkaXQucXVlcnlTZWxlY3RvcihcIiNhYm91dE1lXCIpO1xyXG5cclxuLy8gTSBPIEQgQSBMICBQIEEgUiBBICAgQSBHIFIgRSBHIEEgUlxyXG5jb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2FkZFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc1wiKTtcclxuLyogQiBPIFQgTyBOICAgQSBHIFIgRSBHIEEgUiAgSSBNIEEgRyBFIE4gRSBTICAgKi9cclxuY29uc3QgcHJvZmlsZUJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcclxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVtcGxhdGVfX2NhcmRcIik7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgdGl0bGUgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VVcmwgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlVXJsXCIpO1xyXG5jb25zdCBidXR0b25DcmVhdGUgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2JvdG9uX19jcmVhdGVcIik7XHJcblxyXG4vLyBCIE8gVCBPIE4gICBQIEEgUiBBICAgQyBFIFIgUiBBIFIgICBFIEwgICBQIE8gUCBVIFBcclxuY29uc3QgcG9wdXBDbG9zZUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWFkZFwiKTtcclxuLy8gTSBPIFMgVCBSIEEgUiAgIEwgQSAgIEkgTSBBIEcgRSBOICAgRSBOICBQIE8gUCBVIFBcclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VzXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZW4gPSBwb3B1cEltYWdlcy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZW5cIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cE5hbWUgPSBwb3B1cEltYWdlcy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19uYW1lXCIpO1xyXG4vLyBCIE8gVCBPIE4gICBDIEUgUiBSIEEgUiAgIEkgTSBBIEcgRSBOIEUgU1xyXG5leHBvcnQgY29uc3QgcG9wdXBDbG9zZUltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWltYWdlc1wiKTtcclxuXHJcbi8vRlVOQ0lPTiBQQVJBIEFCUklSIEVMIEZPUk1VTEFSSU8gRURJVFxyXG5leHBvcnQgZnVuY3Rpb24gb3BlblByb2ZpbGVFZGl0KGUpIHtcclxuICBwb3B1cEVkaXQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgbmFtZVVzZXIudmFsdWUgPSBwcm9maWxlTmFtZTtcclxuICBhYm91dE1lLnZhbHVlID0gcHJvZmlsZUFib3V0TWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlUHJvZmlsZUluZm8oZSkge1xyXG4gIC8vIFNvbG8gbG9zIHN1Ym1pdCBsbGV2YW4gcHJldmVudERlZmF1bHRcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgcHJvZmlsZU5hbWVzLnRleHRDb250ZW50ID0gbmFtZVVzZXIudmFsdWU7XHJcbiAgcHJvZmlsZUFib3V0VXMudGV4dENvbnRlbnQgPSBhYm91dE1lLnZhbHVlO1xyXG4gIHBvcHVwRWRpdC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX29wZW5lZFwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlUHJvZmlsZUVkaXQoZSkge1xyXG4gIHBvcHVwRWRpdC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX29wZW5lZFwiKTtcclxufVxyXG5cclxuLy8gQ0VSUkFSIEVMIFBPUFVQIEVESVRBUi9BR1JFR0FSIENVQU5ETyBQUkVTSU9ORU4gRVNDQVBFIE8gREVOVFJPIERFTCBQT1BVUFxyXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cChlKSB7XHJcbiAgaWYgKFxyXG4gICAgZS5rZXlDb2RlID09PSAyNyB8fFxyXG4gICAgZS50YXJnZXQgPT09IHBvcHVwRWRpdCB8fFxyXG4gICAgZS50YXJnZXQgPT09IHBvcHVwQWRkIHx8XHJcbiAgICBlLnRhcmdldCA9PT0gcG9wdXBJbWFnZXNcclxuICApIHtcclxuICAgIHBvcHVwRWRpdC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX29wZW5lZFwiKTtcclxuICAgIHBvcHVwQWRkLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3BlbmVkXCIpO1xyXG4gICAgcG9wdXBJbWFnZXMuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBIEcgUiBFIEcgQSBSICAgVCBBIFIgSiBFIFQgQSBTICAgRCBFICAgSSBNIEEgRyBFIE4gRSBTXHJcbmV4cG9ydCBmdW5jdGlvbiBidXR0b25BZGRDYXJkcyhlKSB7XHJcbiAgcG9wdXBBZGQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuZWRcIik7XHJcbn1cclxuXHJcbi8vIEVMSU1JTkFSIFBPUFVQIEZPUk1VTEFSSU8gQ0FSRFNcclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlRm9ybUFkZChlKSB7XHJcbiAgcG9wdXBBZGQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XHJcbn1cclxuXHJcbi8vIEYgVSBOIEMgSSBPIE4gICBBIEcgUiBFIEcgQSBSICAgVCBBIFIgSiBFIFQgQVxyXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2FyZHMoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBhZGRDYXJkID0gbmV3IENhcmQodGl0bGUudmFsdWUsIGltYWdlVXJsLnZhbHVlLCB0ZW1wbGF0ZUNhcmQpO1xyXG4gIC8vIEEgw5EgQSBEIEUgICBMIEEgICBUIEEgUiBKIEUgVCBBICAgQSBMICBQIFIgSSBOIEMgSSBQIEkgTyAgIEMgTyBOIFBSRVBFTkRcclxuICBjYXJkcy5wcmVwZW5kKGFkZENhcmQuZ2VuZXJhdGVDYXJkKCkpO1xyXG4gIHBvcHVwQWRkLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3BlbmVkXCIpO1xyXG4gIGZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgYnV0dG9uQ3JlYXRlLmNsYXNzTGlzdC5hZGQoXCJidXR0b25faW5hY3RpdmVcIik7XHJcbn1cclxuLy8gQ2xvc2UgUG9wdXBcclxuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZVBvcHVwKTtcclxucG9wdXBFZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVBvcHVwKTtcclxucG9wdXBBZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlUG9wdXApO1xyXG5wb3B1cEltYWdlcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VQb3B1cCk7XHJcblxyXG5wcm9maWxlQnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBidXR0b25BZGRDYXJkcyk7XHJcbmZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYWRkQ2FyZHMpO1xyXG5wb3B1cENsb3NlQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUZvcm1BZGQpO1xyXG5cclxucHJvZmlsZUJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlRWRpdCk7XHJcbmZvcm1FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgc2F2ZVByb2ZpbGVJbmZvKTtcclxucG9wdXBDbG9zZUVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlUHJvZmlsZUVkaXQpOyIsImltcG9ydCB7XHJcbiAgICB0ZW1wbGF0ZUNhcmQscG9wdXBDbG9zZUltYWdlcywgcG9wdXBJbWFnZXMsIGNhcmRzXHJcbiAgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xyXG4gIFxyXG4gIC8vIEMgQSBSIEcgQSBSICAgSSBNIEEgRyBFIE4gRSBTICBJIE4gSSBDIEkgQSBMIEUgUyAgIEEgICBIIFQgTSBMXHJcbiAgZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJNb3VudGFpbnNcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJDb2xvcnNcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJCaXJoYXRcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWxcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXHJcbiAgICB9LFxyXG4gIF07XHJcbiAgXHJcbiAgZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgbGluaywgdGVtcGxhdGVDYXJkKSB7XHJcbiAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgIHRoaXMubGluayA9IGxpbms7XHJcbiAgICAgIHRoaXMudGVtcGxhdGVDYXJkID0gdGVtcGxhdGVDYXJkO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICB0aGlzLmNhcmQgPSB0ZW1wbGF0ZUNhcmQuY2xvbmVOb2RlKHRydWUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX3NldFByb3BlcnRpZXMoKSB7XHJcbiAgICAgIHRoaXMuY2FyZEltZyA9IHRoaXMuY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcclxuICAgICAgdGhpcy5jYXJkTmFtZSA9IHRoaXMuY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX25hbWVcIik7XHJcbiAgICAgIHRoaXMuY2FyZExpa2UgPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpO1xyXG4gICAgICB0aGlzLmJ1dHRvblRyYXNoID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIik7XHJcbiAgXHJcbiAgICAgIHRoaXMuY2FyZEltZy5zcmMgPSB0aGlzLmxpbms7XHJcbiAgICAgIHRoaXMuY2FyZEltZy5hbHQgPSB0aGlzLm5hbWU7XHJcbiAgICAgIHRoaXMuY2FyZE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBIYW5kbGVyIGN1YW5kbyBzZSBlamVjdXRhIHVuYSBmdW5jacOzblxyXG4gICAgX2hhbmRsZURlbGV0ZSgpIHtcclxuICAgICAgdGhpcy5jYXJkLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX2hhbmRsZUxpa2UoKSB7XHJcbiAgICAgIHRoaXMuY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gRSBWIEUgTiBUIE8gICBQIEEgUiBBICAgTSBPIFMgVCBSIEEgUiAgIEwgQSAgIEkgTSBBIEcgRSBOICAgUyBFIEwgRSBDIEMgSSBPIE4gQSBEIEFcclxuICAgIF9oYW5kbGVPcGVuSW1hZ2VzUG9wdXAoKSB7XHJcbiAgICAgIHRoaXMucG9wdXBJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZXNcIik7XHJcbiAgICAgIHRoaXMucG9wdXBJbWFnZXMuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgIHRoaXMucG9wdXBJbWFnZW4gPSB0aGlzLnBvcHVwSW1hZ2VzLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlblwiKTtcclxuICAgICAgdGhpcy5wb3B1cE5hbWUgPSB0aGlzLnBvcHVwSW1hZ2VzLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX25hbWVcIik7XHJcbiAgICAgIHRoaXMucG9wdXBJbWFnZW4uc3JjID0gdGhpcy5saW5rO1xyXG4gICAgICB0aGlzLnBvcHVwSW1hZ2VuLmFsdCA9IHRoaXMubmFtZTtcclxuICAgICAgdGhpcy5wb3B1cE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBFIFYgRSBOIFQgTyAgIFAgQSBSIEEgICBDIEUgUiBSIEEgUiAgIEwgQSAgIEkgTSBBIEcgRSBOICAgUyBFIEwgRSBDIEMgSSBPIE4gQSBEIEFcclxuICAgIF9oYW5kbGVDbG9zZUltYWdlc1BvcHVwKCkge1xyXG4gICAgICBwb3B1cEltYWdlcy5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX29wZW5lZFwiKTtcclxuICAgIH1cclxuICBcclxuICAgIC8vIFNldEV2ZW50TGlzdGVuZXIsIEVzdGFibGVjZSBsb3MgZXZlbnRvcy0+U2UgY3JlYW4gbG9zIGV2ZW50b3NcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgdGhpcy5idXR0b25UcmFzaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2UoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY2FyZEltZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZU9wZW5JbWFnZXNQb3B1cCgpO1xyXG4gICAgICB9KTtcclxuICAgICAgcG9wdXBDbG9zZUltYWdlcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlSW1hZ2VzUG9wdXAoKTtcclxuICAgICAgfSk7XHJcbiAgXHJcbiAgICAgIHRoaXMucmVnZXggPSAvXFwuKGpwZWd8anBnfHBuZ3xnaWZ8c3ZnKSQvaTtcclxuICAgICAgaWYgKHRoaXMuY2FyZEltZy5zcmMgPT09IFwiXCIgfHwgIXRoaXMucmVnZXgudGVzdCh0aGlzLmNhcmRJbWcuc3JjKSkge1xyXG4gICAgICAgIHRoaXMuY2FyZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiMwMDBcIjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgICB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICB0aGlzLl9zZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgXHJcbiAgICAgIHJldHVybiB0aGlzLmNhcmQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEMgQSBSIEcgQSBOIEQgTyAgIEkgTSBBIEcgRSBOIEUgUyAgRSBOICAgRSBMICAgQyBPIE4gVCBBIEkgTiBFIFJcclxuICBpbml0aWFsQ2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0ubmFtZSwgaXRlbS5saW5rLCBpdGVtLnRlbXBsYXRlQ2FyZCk7XHJcbiAgICBjYXJkcy5hcHBlbmQoY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgXHJcbiAgLyogYWJzdHJhY2Npb25cclxuICAgIENBUEFTXHJcbiAgICB1biBjbG9uIGRlIHRhcmpldGFcclxuICAgIHVuYSBpbWFnZW4gY29uIGxpbmtcclxuICAgIHVuIHRleHRvXHJcbiAgICB1bmEgaW1hZ2VuIGRlIGJvdGUgZGUgYmFzdXJhXHJcbiAgICB1biBsaWtlXHJcbiAgICAqKk1FVE9ET1MqKlxyXG4gICAgbWV0b2RvIHBhcmEgZGFybGUgbGlrZSBhIGxhIHRhcmpldGFcclxuICAgIG1ldG9kbyBwYXJhIGFncmVnYXIgdGFyamV0YVxyXG4gICAgbWV0b2RvIHBhcmEgcmVtb3ZlciB0YXJqZXRhXHJcbiAgKi9cclxuICAiLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZykge1xyXG4gICAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICAgIHRoaXMuZm9ybVNlbGVjdG9yID0gc2V0dGluZy5mb3JtU2VsZWN0b3I7XHJcbiAgICAgIHRoaXMuaW5wdXRTZWxlY3RvciA9IHNldHRpbmcuaW5wdXRTZWxlY3RvcjtcclxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgIHRoaXMuaW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgICAgdGhpcy5pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5nLmlucHV0RXJyb3JDbGFzcztcclxuICAgICAgdGhpcy5lcnJvckNsYXNzID0gc2V0dGluZy5lcnJvckNsYXNzO1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQgPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgc2V0dGluZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuaW5wdXRTZWxlY3RvcilcclxuICAgICAgKTtcclxuICAgIH1cclxuICBcclxuICAgIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgICB0aGlzLmVycm9yRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICAgKTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgdGhpcy5lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmVycm9yQ2xhc3MpO1xyXG4gIFxyXG4gICAgfTtcclxuICBcclxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5lcnJvckVsZW1lbnQgPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICAgICk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgdGhpcy5lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmVycm9yQ2xhc3MpO1xyXG4gICAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9O1xyXG4gIFxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQgfHwgaW5wdXRFbGVtZW50ID09IFwiXCIpIHtcclxuICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICBcclxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gIFxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuaW5wdXRMaXN0KSkge1xyXG4gICAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICBcclxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfTtcclxuICBcclxuICAgIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5mb3JtU2VsZWN0b3IpKTtcclxuICAgICAgdGhpcy5mb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgfVxyXG4gICIsIi8vIEltcG9ydGFuZG8gaG9qYXMgZGUgZXN0aWxvXHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiOyBcclxuXHJcbi8vIEltcG9ydGFuZG8gY2xhc2VzXHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgZm9ybUVsZW1lbnQsXHJcbiAgZm9ybUVkaXQsXHJcbn0gZnJvbSBcIi4vdXRpbHMuanNcIjtcclxuXHJcbi8vIE8gQiBKIEUgVCBPIFMgICBEIEUgICBWIEEgTCBPIFIgRSBTICAgRCBJIE4gQSBNIEkgQyBPIFNcclxuY29uc3Qgc2F2ZUZvcm0gPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtX19lZGl0XCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJidXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfZXJyb3JcIixcclxufTtcclxuXHJcbmNvbnN0IGFkZEZvcm0gPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtX19hZGRcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvclwiLFxyXG59O1xyXG4vLyBJbnN0YW5jaWFzIGRlIGZvcm1WYWxpZGF0b3JcclxuY29uc3QgZm9ybUNhcmQgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudCwgYWRkRm9ybSk7XHJcbmZvcm1DYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgZm9ybVByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWRpdCwgc2F2ZUZvcm0pO1xyXG5mb3JtUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4iXSwibmFtZXMiOlsicHJvZmlsZUJ1dHRvbkVkaXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cENsb3NlRWRpdCIsInByb2ZpbGVJbmZvIiwicHJvZmlsZU5hbWVzIiwicHJvZmlsZUFib3V0VXMiLCJwcm9maWxlTmFtZSIsInRleHRDb250ZW50IiwicHJvZmlsZUFib3V0TWUiLCJwb3B1cEVkaXQiLCJmb3JtRWRpdCIsIm5hbWVVc2VyIiwiYWJvdXRNZSIsInBvcHVwQWRkIiwiY2FyZHMiLCJwcm9maWxlQnV0dG9uQWRkIiwidGVtcGxhdGVDYXJkIiwiZm9ybUVsZW1lbnQiLCJ0aXRsZSIsImltYWdlVXJsIiwiYnV0dG9uQ3JlYXRlIiwicG9wdXBDbG9zZUFkZCIsInBvcHVwSW1hZ2VzIiwicG9wdXBDbG9zZUltYWdlcyIsImNsb3NlUG9wdXAiLCJlIiwia2V5Q29kZSIsInRhcmdldCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImJvZHkiLCJhZGRFdmVudExpc3RlbmVyIiwiYWRkIiwicHJldmVudERlZmF1bHQiLCJhZGRDYXJkIiwiQ2FyZCIsInZhbHVlIiwicHJlcGVuZCIsImdlbmVyYXRlQ2FyZCIsInJlc2V0IiwibmFtZSIsImxpbmsiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwia2V5IiwiY2FyZCIsImNsb25lTm9kZSIsImNvbnRlbnQiLCJjYXJkSW1nIiwiY2FyZE5hbWUiLCJjYXJkTGlrZSIsImJ1dHRvblRyYXNoIiwic3JjIiwiYWx0IiwidG9nZ2xlIiwicG9wdXBJbWFnZW4iLCJwb3B1cE5hbWUiLCJfdGhpcyIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlTGlrZSIsIl9oYW5kbGVPcGVuSW1hZ2VzUG9wdXAiLCJfaGFuZGxlQ2xvc2VJbWFnZXNQb3B1cCIsInJlZ2V4IiwidGVzdCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiX2dldFRlbXBsYXRlIiwiX3NldFByb3BlcnRpZXMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiaXRlbSIsImFwcGVuZCIsIkZvcm1WYWxpZGF0b3IiLCJfY3JlYXRlQ2xhc3MiLCJzZXR0aW5nIiwiX2RlZmluZVByb3BlcnR5IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJidXR0b25FbGVtZW50IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JtTGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==